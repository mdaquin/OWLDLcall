<?xml version="1.0"?>
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
         xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
         xmlns:owl="http://www.w3.org/2002/07/owl#"
         xml:base="https://k.loria.fr/ontologies/examples/equations"
         xmlns="https://k.loria.fr/ontologies/examples/equations#"
         xmlns:call="https://k.loria.fr/ontologies/call#">

<owl:Ontology rdf:about="https://k.loria.fr/ontologies/examples/equations">
  <owl:imports rdf:resource="https://k.loria.fr/ontologies/call"/>
</owl:Ontology>

<owl:ObjectProperty rdf:about="#hasCharacteristicPolynomial">
  <rdf:type rdf:resource="http://www.w3.org/2002/07/owl#FunctionalProperty"/>
  <rdfs:range rdf:resource="#Polynomial"/>
</owl:ObjectProperty>

<owl:ObjectProperty rdf:about="#hasEquation">
  <rdf:type rdf:resource="http://www.w3.org/2002/07/owl#FunctionalProperty"/>
  <rdfs:range rdf:resource="#Equation"/>
</owl:ObjectProperty>

<owl:ObjectProperty rdf:about="#hasMatrix">
  <rdf:type rdf:resource="http://www.w3.org/2002/07/owl#FunctionalProperty"/>
  <rdfs:range rdf:resource="#Matrix"/>
</owl:ObjectProperty>

<owl:ObjectProperty rdf:about="#hasRootSet">
  <rdfs:range rdf:resource="#SolutionSet"/>
  <owl:propertyChainAxiom>
    <rdf:Description>
      <rdf:first rdf:resource="#hasEquation"/>
      <rdf:rest>
        <rdf:Description>
          <rdf:first rdf:resource="#hasSolutionSet"/>
          <rdf:rest rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"/>
        </rdf:Description>
      </rdf:rest>
    </rdf:Description>
  </owl:propertyChainAxiom>
</owl:ObjectProperty>

<owl:ObjectProperty rdf:about="#hasSolutionSet">
  <rdf:type rdf:resource="http://www.w3.org/2002/07/owl#FunctionalProperty"/>
  <rdfs:domain rdf:resource="#Equation2ndDegree"/>
  <rdfs:range rdf:resource="#SolutionSet"/>
</owl:ObjectProperty>

<owl:ObjectProperty rdf:about="#hasSetOfEigenValues">
  <rdfs:range rdf:resource="#SolutionSet"/>
  <owl:propertyChainAxiom>
    <rdf:Description>
      <rdf:first rdf:resource="#hasCharacteristicPolynomial"/>
      <rdf:rest>
        <rdf:Description>
          <rdf:first rdf:resource="#hasRootSet"/>
          <rdf:rest rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"/>
        </rdf:Description>
      </rdf:rest>
    </rdf:Description>
  </owl:propertyChainAxiom>
</owl:ObjectProperty>

<owl:ObjectProperty rdf:about="#hasSolution">
  <rdfs:range rdf:resource="#Solution"/>
  <owl:propertyChainAxiom>
    <rdf:Description>
      <rdf:first rdf:resource="#hasMatrix"/>
      <rdf:rest>
        <rdf:Description>
          <rdf:first rdf:resource="#hasSetOfEigenValues"/>
          <rdf:rest rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"/>
        </rdf:Description>
      </rdf:rest>
    </rdf:Description>
  </owl:propertyChainAxiom>
</owl:ObjectProperty>

<owl:ObjectProperty rdf:about="#hasSolvingMethod"/>

<owl:ObjectProperty rdf:about="#hasUnknown">
  <rdf:type rdf:resource="http://www.w3.org/2002/07/owl#FunctionalProperty"/>
  <rdfs:range rdf:resource="#Unknown"/>
</owl:ObjectProperty>

<owl:ObjectProperty rdf:about="#isPreferredTo"/>

<owl:DatatypeProperty rdf:about="#degree">
  <rdf:type rdf:resource="http://www.w3.org/2002/07/owl#FunctionalProperty"/>
  <rdfs:domain rdf:resource="#PolynomialEquation"/>
  <rdfs:range rdf:resource="http://www.w3.org/2001/XMLSchema#integer"/>
</owl:DatatypeProperty>

<owl:DatatypeProperty rdf:about="#hasEquality">
  <rdf:type rdf:resource="http://www.w3.org/2002/07/owl#FunctionalProperty"/>
  <rdfs:range rdf:resource="http://www.w3.org/2001/XMLSchema#string"/>
</owl:DatatypeProperty>

<owl:DatatypeProperty rdf:about="#hasExpression">
  <rdf:type rdf:resource="http://www.w3.org/2002/07/owl#FunctionalProperty"/>
  <rdfs:domain>
    <owl:Class>
      <owl:unionOf rdf:parseType="Collection">
        <rdf:Description rdf:about="#Matrix"/>
        <rdf:Description rdf:about="#Polynomial"/>
      </owl:unionOf>
    </owl:Class>
  </rdfs:domain>
  <rdfs:range rdf:resource="http://www.w3.org/2001/XMLSchema#string"/>
</owl:DatatypeProperty>

<owl:DatatypeProperty rdf:about="#hasName">
  <rdf:type rdf:resource="http://www.w3.org/2002/07/owl#FunctionalProperty"/>
  <rdfs:range rdf:resource="http://www.w3.org/2001/XMLSchema#string"/>
</owl:DatatypeProperty>

<owl:DatatypeProperty rdf:about="#hasType">
  <rdf:type rdf:resource="http://www.w3.org/2002/07/owl#FunctionalProperty"/>
  <rdfs:range rdf:resource="http://www.w3.org/2001/XMLSchema#string"/>
</owl:DatatypeProperty>

<owl:DatatypeProperty rdf:about="#hasValue">
  <rdfs:range rdf:resource="http://www.w3.org/2001/XMLSchema#string"/>
</owl:DatatypeProperty>

<owl:DatatypeProperty rdf:about="#isAPolynomialEquation">
  <rdf:type rdf:resource="http://www.w3.org/2002/07/owl#FunctionalProperty"/>
  <rdfs:range rdf:resource="http://www.w3.org/2001/XMLSchema#boolean"/>
</owl:DatatypeProperty>

<owl:DatatypeProperty rdf:about="#isASquareMatrix">
  <rdf:type rdf:resource="http://www.w3.org/2002/07/owl#FunctionalProperty"/>
  <rdfs:range rdf:resource="http://www.w3.org/2001/XMLSchema#boolean"/>
</owl:DatatypeProperty>

<owl:Class rdf:about="#Polynomial">
  <rdfs:subClassOf>
    <owl:Restriction>
      <owl:onProperty rdf:resource="#hasExpression"/>
      <owl:cardinality rdf:datatype="http://www.w3.org/2001/XMLSchema#nonNegativeInteger">1</owl:cardinality>
    </owl:Restriction>
  </rdfs:subClassOf>
</owl:Class>

<owl:Class rdf:about="#Equation"/>

<owl:Class rdf:about="#Matrix"/>

<owl:Class rdf:about="#SolutionSet">
  <rdfs:subClassOf rdf:resource="#Solution"/>
  <rdfs:subClassOf>
    <owl:Class>
      <owl:intersectionOf rdf:parseType="Collection">
        <owl:Restriction>
          <owl:onProperty rdf:resource="#hasValue"/>
          <owl:allValuesFrom rdf:resource="http://www.w3.org/2000/01/rdf-schema#Literal"/>
        </owl:Restriction>
        <owl:Restriction>
          <owl:onProperty rdf:resource="#hasValue"/>
          <owl:minCardinality rdf:datatype="http://www.w3.org/2001/XMLSchema#nonNegativeInteger">0</owl:minCardinality>
        </owl:Restriction>
        <owl:Restriction>
          <owl:onProperty rdf:resource="#hasValue"/>
          <owl:maxCardinality rdf:datatype="http://www.w3.org/2001/XMLSchema#nonNegativeInteger">2</owl:maxCardinality>
        </owl:Restriction>
      </owl:intersectionOf>
    </owl:Class>
  </rdfs:subClassOf>
  <rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string">represents the roots of a second degree equation. (depends on the used method)

Warning, this isn't the class representing the solutions of the problem of solving a second degree equation (which is the Solution class).

DatatypeProperty annotations are essential to understand which property has to be set when the call create an instance.
Right now, it only works with one datatypeProperty per class. (With multiple ones, it's difficult to know which one relates to which result of the called function)</rdfs:comment>
</owl:Class>

<owl:Class rdf:about="#Solution"/>

<owl:Class rdf:about="#Equation2ndDegree">
  <owl:equivalentClass>
    <owl:Class>
      <owl:intersectionOf rdf:parseType="Collection">
        <rdf:Description rdf:about="#PolynomialEquation"/>
        <owl:Restriction>
          <owl:onProperty rdf:resource="#degree"/>
          <owl:hasValue rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">2</owl:hasValue>
        </owl:Restriction>
      </owl:intersectionOf>
    </owl:Class>
  </owl:equivalentClass>
  <rdfs:subClassOf rdf:resource="#PolynomialEquation"/>
</owl:Class>

<owl:Class rdf:about="#Unknown">
  <rdfs:subClassOf>
    <owl:Restriction>
      <owl:onProperty rdf:resource="#hasName"/>
      <owl:cardinality rdf:datatype="http://www.w3.org/2001/XMLSchema#nonNegativeInteger">1</owl:cardinality>
    </owl:Restriction>
  </rdfs:subClassOf>
</owl:Class>

<owl:Class rdf:about="#PolynomialEquation">
  <owl:equivalentClass>
    <owl:Class>
      <owl:intersectionOf rdf:parseType="Collection">
        <rdf:Description rdf:about="#Equation1RealUnknown"/>
        <owl:Restriction>
          <owl:onProperty rdf:resource="#isAPolynomialEquation"/>
          <owl:hasValue rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean">true</owl:hasValue>
        </owl:Restriction>
      </owl:intersectionOf>
    </owl:Class>
  </owl:equivalentClass>
  <rdfs:subClassOf rdf:resource="#Equation1RealUnknown"/>
</owl:Class>

<owl:Class rdf:about="#Equation1RealUnknown">
  <owl:equivalentClass>
    <owl:Class>
      <owl:intersectionOf rdf:parseType="Collection">
        <rdf:Description rdf:about="#Equation"/>
        <owl:Restriction>
          <owl:onProperty rdf:resource="#hasUnknown"/>
          <owl:onClass>
            <owl:Restriction>
              <owl:onProperty rdf:resource="#hasType"/>
              <owl:hasValue rdf:datatype="http://www.w3.org/2001/XMLSchema#string">real</owl:hasValue>
            </owl:Restriction>
          </owl:onClass>
          <owl:qualifiedCardinality rdf:datatype="http://www.w3.org/2001/XMLSchema#nonNegativeInteger">1</owl:qualifiedCardinality>
        </owl:Restriction>
      </owl:intersectionOf>
    </owl:Class>
  </owl:equivalentClass>
  <rdfs:subClassOf rdf:resource="#Equation"/>
</owl:Class>

<owl:Class rdf:about="#EquationSolving">
  <rdfs:subClassOf>
    <owl:Class>
      <owl:intersectionOf rdf:parseType="Collection">
        <rdf:Description rdf:about="#Problem"/>
        <owl:Restriction>
          <owl:onProperty rdf:resource="#hasEquation"/>
          <owl:someValuesFrom rdf:resource="#Equation"/>
        </owl:Restriction>
      </owl:intersectionOf>
    </owl:Class>
  </rdfs:subClassOf>
  <rdfs:subClassOf rdf:resource="#Problem"/>
</owl:Class>

<owl:Class rdf:about="#Problem"/>

<owl:Class rdf:about="#FindingEigenValues">
  <rdfs:subClassOf rdf:resource="#Problem"/>
</owl:Class>

<owl:Class rdf:about="#SquareMatrix">
  <owl:equivalentClass>
    <owl:Class>
      <owl:intersectionOf rdf:parseType="Collection">
        <rdf:Description rdf:about="#Matrix"/>
        <owl:Restriction>
          <owl:onProperty rdf:resource="#isASquareMatrix"/>
          <owl:hasValue rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean">true</owl:hasValue>
        </owl:Restriction>
      </owl:intersectionOf>
    </owl:Class>
  </owl:equivalentClass>
  <rdfs:subClassOf rdf:resource="#Matrix"/>
</owl:Class>

<owl:NamedIndividual rdf:about="#callComputeCharPol">
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#CallFormula"/>
  <call:functionToCall rdf:resource="#funListComputeCharPol"/>
  <call:hasParams rdf:resource="#matrixCallParam"/>
  <call:domain rdf:resource="#SquareMatrix"/>
  <call:range rdf:resource="#Polynomial"/>
  <call:subsumingProperty rdf:resource="#hasCharacteristicPolynomial"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#funListComputeCharPol">
  <call:functionListHead rdf:resource="#funComputeCharPol"/>
  <call:hasDatatypeProperty rdf:resource="#hasExpression"/>
  <call:range rdf:resource="http://www.w3.org/2001/XMLSchema#string"/>
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#FunctionList"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#matrixCallParam">
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#ParamList"/>
  <call:paramListHead rdf:resource="#matrixCallPropChain"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#callDegree">
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#CallFormula"/>
  <call:functionToCall rdf:resource="#funDegree"/>
  <call:hasParams rdf:resource="#equationsCallParam1"/>
  <call:domain rdf:resource="#PolynomialEquation"/>
  <call:range rdf:resource="http://www.w3.org/2001/XMLSchema#integer"/>
  <call:subsumingProperty rdf:resource="#degree"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#funDegree">
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#PythonFunction"/>
  <call:hasPyExec rdf:datatype="http://www.w3.org/2001/XMLSchema#string">def poly_degree(unk_name: str, equality: str):
    import sympy as sp
    unk = sp.symbols(unk_name)
    eq_str = equality.split("=")
    if len(eq_str) != 2:
        return None
    else:
        eq = sp.Eq(sp.sympify(eq_str[0]), sp.sympify(eq_str[1]), evaluate=False).simplify().as_poly(unk)
        if eq is None:
            return None
        else:
            deg = eq.degree(unk)
            return -1 if deg == -sp.oo else deg</call:hasPyExec>
  <call:hasPyExpr rdf:datatype="http://www.w3.org/2001/XMLSchema#string">poly_degree</call:hasPyExpr>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#equationsCallParam1">
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#ParamList"/>
  <call:paramListHead rdf:resource="#equationsCallPropChain1"/>
  <call:paramListTail rdf:resource="#equationsCallParam2"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#callFindObviousRootEqDeg2">
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#CallFormula"/>
  <call:functionToCall rdf:resource="#funListFindObviousRootEqDeg2"/>
  <call:hasParams rdf:resource="#equationsCallParam1"/>
  <call:domain rdf:resource="#Equation2ndDegree"/>
  <call:range rdf:resource="#SolutionSet"/>
  <call:subsumingProperty rdf:resource="#hasSolutionSet"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#funListFindObviousRootEqDeg2">
  <call:functionListHead rdf:resource="#findObviousRootEqDeg2"/>
  <call:hasDatatypeProperty rdf:resource="#hasValue"/>
  <call:range rdf:resource="http://www.w3.org/2001/XMLSchema#string"/>
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#FunctionList"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#callIsAPolynomialEquation">
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#CallFormula"/>
  <call:functionToCall rdf:resource="#funIsAPolynomialEquation"/>
  <call:hasParams rdf:resource="#equationsCallParam1"/>
  <call:domain rdf:resource="#Equation1RealUnknown"/>
  <call:range rdf:resource="http://www.w3.org/2001/XMLSchema#boolean"/>
  <call:subsumingProperty rdf:resource="#isAPolynomialEquation"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#funIsAPolynomialEquation">
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#PythonFunction"/>
  <call:hasPyExec rdf:datatype="http://www.w3.org/2001/XMLSchema#string">def is_polynomial(unk_name: str, equality: str):
    import sympy as sp
    unk = sp.symbols(unk_name)
    eq_str = equality.split("=")
    if len(eq_str) != 2:
        return None
    else:
        eq = sp.Eq(sp.sympify(eq_str[0]), sp.sympify(eq_str[1]), evaluate=False).simplify().as_poly(unk)
        return True if eq is not None else None</call:hasPyExec>
  <call:hasPyExpr rdf:datatype="http://www.w3.org/2001/XMLSchema#string">is_polynomial</call:hasPyExpr>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#callIsASquareMatrix">
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#CallFormula"/>
  <call:functionToCall rdf:resource="#funIsASquareMatrix"/>
  <call:hasParams rdf:resource="#matrixCallParam"/>
  <call:domain rdf:resource="#Matrix"/>
  <call:range rdf:resource="http://www.w3.org/2001/XMLSchema#boolean"/>
  <call:subsumingProperty rdf:resource="#isASquareMatrix"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#funIsASquareMatrix">
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#PythonFunction"/>
  <call:hasPyExec rdf:datatype="http://www.w3.org/2001/XMLSchema#string">def matrix_is_squared(expr:str):
    import sympy as sp
    mat = sp.Matrix(eval(expr))
    return mat.is_square</call:hasPyExec>
  <call:hasPyExpr rdf:datatype="http://www.w3.org/2001/XMLSchema#string">matrix_is_squared</call:hasPyExpr>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#callPolToEquation">
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#CallFormula"/>
  <call:functionToCall rdf:resource="#funListPolToEquation"/>
  <call:hasParams rdf:resource="#polynomialCallParam"/>
  <call:domain rdf:resource="#Polynomial"/>
  <call:range rdf:resource="#PolynomialEquation"/>
  <call:subsumingProperty rdf:resource="#hasEquation"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#funListPolToEquation">
  <call:functionListHead rdf:resource="#funPolToEquationGetEquality"/>
  <call:functionListTail rdf:resource="#funListPolToEquation2"/>
  <call:hasDatatypeProperty rdf:resource="#hasEquality"/>
  <call:range rdf:resource="http://www.w3.org/2001/XMLSchema#string"/>
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#FunctionList"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#polynomialCallParam">
  <call:paramListHead rdf:resource="#polynomialCallPropChain"/>
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#ParamList"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#callUseDiscriminant">
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#CallFormula"/>
  <call:functionToCall rdf:resource="#funListUseDiscriminant"/>
  <call:hasParams rdf:resource="#equationsCallParam1"/>
  <call:domain rdf:resource="#Equation2ndDegree"/>
  <call:range rdf:resource="#SolutionSet"/>
  <call:subsumingProperty rdf:resource="#hasSolutionSet"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#funListUseDiscriminant">
  <call:functionListHead rdf:resource="#useDiscriminant"/>
  <call:hasDatatypeProperty rdf:resource="#hasValue"/>
  <call:range rdf:resource="http://www.w3.org/2001/XMLSchema#string"/>
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#FunctionList"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#eq1">
  <rdf:type rdf:resource="#Equation1RealUnknown"/>
  <hasUnknown rdf:resource="#unk1"/>
  <rdf:type rdf:resource="#PolynomialEquation"/>
  <rdf:type rdf:resource="#Equation2ndDegree"/>
  <hasSolutionSet rdf:resource="#solutionset1"/>
  <hasSolutionSet rdf:resource="#solutionset2"/>
  <degree rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">2</degree>
  <hasEquality rdf:datatype="http://www.w3.org/2001/XMLSchema#string">x ** 2 + 2 = -3 * x</hasEquality>
  <isAPolynomialEquation rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean">true</isAPolynomialEquation>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#unk1">
  <rdf:type rdf:resource="#Unknown"/>
  <hasName rdf:datatype="http://www.w3.org/2001/XMLSchema#string">x</hasName>
  <hasType rdf:datatype="http://www.w3.org/2001/XMLSchema#string">real</hasType>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#eq2">
  <rdf:type rdf:resource="#Equation1RealUnknown"/>
  <hasUnknown rdf:resource="#unk2"/>
  <rdf:type rdf:resource="#PolynomialEquation"/>
  <rdf:type rdf:resource="#Equation2ndDegree"/>
  <hasSolutionSet rdf:resource="#solutionset3"/>
  <degree rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">2</degree>
  <hasEquality rdf:datatype="http://www.w3.org/2001/XMLSchema#string">t ** 2 + 4 * t + 1 = 0</hasEquality>
  <isAPolynomialEquation rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean">true</isAPolynomialEquation>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#unk2">
  <rdf:type rdf:resource="#Unknown"/>
  <hasName rdf:datatype="http://www.w3.org/2001/XMLSchema#string">t</hasName>
  <hasType rdf:datatype="http://www.w3.org/2001/XMLSchema#string">real</hasType>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#eq3">
  <rdf:type rdf:resource="#Equation1RealUnknown"/>
  <hasUnknown rdf:resource="#unk1"/>
  <rdf:type rdf:resource="#PolynomialEquation"/>
  <degree rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">1</degree>
  <hasEquality rdf:datatype="http://www.w3.org/2001/XMLSchema#string">4 * x = 2</hasEquality>
  <isAPolynomialEquation rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean">true</isAPolynomialEquation>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#equationsCallPropChain1">
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#PropertyChain"/>
  <call:hasObjectPropertyList rdf:resource="#equationsCallPropChain1List"/>
  <call:hasDatatypeProperty rdf:resource="#hasName"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#equationsCallParam2">
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#ParamList"/>
  <call:paramListHead rdf:resource="#equationsCallPropChain2"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#equationsCallPropChain2">
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#PropertyChain"/>
  <call:hasDatatypeProperty rdf:resource="#hasEquality"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#equationsCallPropChain1List">
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#ObjectPropertyList"/>
  <call:objectPropertyListHead rdf:resource="#hasUnknown"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#findObviousRootEqDeg2">
  <isPreferredTo rdf:resource="#useDiscriminant"/>
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#PythonFunction"/>
  <call:hasPyExec rdf:datatype="http://www.w3.org/2001/XMLSchema#string">def poly_obvious_roots(unk_name: str, equality: str):
    import sympy as sp
    unk = sp.symbols(unk_name)
    eq_str = equality.split("=")
    if len(eq_str) != 2:
        return None
    else:
        eq = sp.Eq(sp.sympify(eq_str[0]), sp.sympify(eq_str[1])).simplify().as_poly()
        for value in range(-2, 3):
            subst_expr = eq.subs(unk, value)
            res = subst_expr.evalf()
            # if we found an obvious root
            if res == 0:
                root1 = value
                coeffs = eq.all_coeffs()
                root2 = -(coeffs[1]/coeffs[0])-root1
                return {root1, root2} if root1 &lt;= root2 else {root2, root1}
        return None</call:hasPyExec>
  <call:hasPyExpr rdf:datatype="http://www.w3.org/2001/XMLSchema#string">poly_obvious_roots</call:hasPyExpr>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#useDiscriminant">
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#PythonFunction"/>
  <call:hasPyExec rdf:datatype="http://www.w3.org/2001/XMLSchema#string">def poly_roots(unk_name: str, equality: str):
    import sympy as sp
    eq_str = equality.split("=")
    if len(eq_str) != 2:
        return None
    else:
        eq = sp.Eq(sp.simplify(eq_str[0]), sp.simplify(eq_str[1])).simplify().as_poly()
        roots =sp.roots(eq)
        if len(roots) &lt; 2:
            return {*roots}
        elif len(roots) == 2:
            l = list(roots)
            return {l[0], l[1]} if l[0] &lt;= l[1] else {l[1], l[0]}</call:hasPyExec>
  <call:hasPyExpr rdf:datatype="http://www.w3.org/2001/XMLSchema#string">poly_roots</call:hasPyExpr>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#funComputeCharPol">
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#PythonFunction"/>
  <call:hasPyExec rdf:datatype="http://www.w3.org/2001/XMLSchema#string">def computeCharPol(expr:str):
    import sympy as sp
    mat = sp.Matrix(eval(expr))
    if not mat.is_square:
        return None
    else:
        return str(mat.charpoly("X").as_expr())</call:hasPyExec>
  <call:hasPyExpr rdf:datatype="http://www.w3.org/2001/XMLSchema#string">computeCharPol</call:hasPyExpr>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#funPolToEquationGetEquality">
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#PythonFunction"/>
  <call:hasPyExec rdf:datatype="http://www.w3.org/2001/XMLSchema#string">def polToEquationGetEquality(expr:str):
    return expr.replace("X", "t")+" = 0"</call:hasPyExec>
  <call:hasPyExpr rdf:datatype="http://www.w3.org/2001/XMLSchema#string">polToEquationGetEquality</call:hasPyExpr>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#funListPolToEquation2">
  <call:functionListHead rdf:resource="#funListPolToEquation3"/>
  <call:hasObjectProperty rdf:resource="#hasUnknown"/>
  <call:range rdf:resource="#Unknown"/>
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#FunctionList"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#funListPolToEquation3">
  <call:functionListHead rdf:resource="#funPolToEquationGetUnknownType"/>
  <call:functionListTail rdf:resource="#funListPolToEquation4"/>
  <call:hasDatatypeProperty rdf:resource="#hasType"/>
  <call:range rdf:resource="http://www.w3.org/2001/XMLSchema#string"/>
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#FunctionList"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#funPolToEquationGetUnknownType">
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#PythonFunction"/>
  <call:hasPyExec rdf:datatype="http://www.w3.org/2001/XMLSchema#string">def polToEquationGetUnknownType(expr:str):
    return "real"</call:hasPyExec>
  <call:hasPyExpr rdf:datatype="http://www.w3.org/2001/XMLSchema#string">polToEquationGetUnknownType</call:hasPyExpr>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#funListPolToEquation4">
  <call:functionListHead rdf:resource="#funPolToEquationGetUnknownName"/>
  <call:hasDatatypeProperty rdf:resource="#hasName"/>
  <call:range rdf:resource="http://www.w3.org/2001/XMLSchema#string"/>
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#FunctionList"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#funPolToEquationGetUnknownName">
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#PythonFunction"/>
  <call:hasPyExec rdf:datatype="http://www.w3.org/2001/XMLSchema#string">def polToEquationGetUnknownName(expr:str):
    return "t"</call:hasPyExec>
  <call:hasPyExpr rdf:datatype="http://www.w3.org/2001/XMLSchema#string">polToEquationGetUnknownName</call:hasPyExpr>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#mat1">
  <rdf:type rdf:resource="#Matrix"/>
  <rdf:type rdf:resource="#SquareMatrix"/>
  <hasCharacteristicPolynomial rdf:resource="#polynomial1"/>
  <hasSetOfEigenValues rdf:resource="#solutionset5"/>
  <hasSetOfEigenValues rdf:resource="#solutionset4"/>
  <hasExpression rdf:datatype="http://www.w3.org/2001/XMLSchema#string">[[2, 1], [1, 2]]</hasExpression>
  <isASquareMatrix rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean">true</isASquareMatrix>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#mat2">
  <rdf:type rdf:resource="#Matrix"/>
  <rdf:type rdf:resource="#SquareMatrix"/>
  <hasCharacteristicPolynomial rdf:resource="#polynomial2"/>
  <hasExpression rdf:datatype="http://www.w3.org/2001/XMLSchema#string">[[3, 5, 6], [1, 2, 9], [37, 55, 23]]</hasExpression>
  <isASquareMatrix rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean">true</isASquareMatrix>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#mat3">
  <rdf:type rdf:resource="#Matrix"/>
  <hasExpression rdf:datatype="http://www.w3.org/2001/XMLSchema#string">[[2, 1, 9], [7, 8, 66]]</hasExpression>
  <isASquareMatrix rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean">false</isASquareMatrix>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#matrixCallPropChain">
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#PropertyChain"/>
  <call:hasDatatypeProperty rdf:resource="#hasExpression"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#pb1">
  <rdf:type rdf:resource="#EquationSolving"/>
  <hasEquation rdf:resource="#eq1"/>
  <hasSolvingMethod rdf:resource="#useDiscriminant"/>
  <hasSolvingMethod rdf:resource="#findObviousRootEqDeg2"/>
  <hasRootSet rdf:resource="#solutionset2"/>
  <hasRootSet rdf:resource="#solutionset1"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#pb2">
  <rdf:type rdf:resource="#EquationSolving"/>
  <hasEquation rdf:resource="#eq2"/>
  <hasSolvingMethod rdf:resource="#useDiscriminant"/>
  <hasSolvingMethod rdf:resource="#findObviousRootEqDeg2"/>
  <hasRootSet rdf:resource="#solutionset3"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#pb3">
  <rdf:type rdf:resource="#FindingEigenValues"/>
  <hasMatrix rdf:resource="#mat1"/>
  <hasSolution rdf:resource="#solutionset5"/>
  <hasSolution rdf:resource="#solutionset4"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#polynomialCallPropChain">
  <rdf:type rdf:resource="https://k.loria.fr/ontologies/call#PropertyChain"/>
  <call:hasDatatypeProperty rdf:resource="#hasExpression"/>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#polynomial1">
  <rdf:type rdf:resource="#Polynomial"/>
  <hasEquation rdf:resource="#polynomialequation1"/>
  <hasRootSet rdf:resource="#solutionset5"/>
  <hasRootSet rdf:resource="#solutionset4"/>
  <hasExpression rdf:datatype="http://www.w3.org/2001/XMLSchema#string">X**2 - 4*X + 3</hasExpression>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#polynomial2">
  <rdf:type rdf:resource="#Polynomial"/>
  <hasEquation rdf:resource="#polynomialequation2"/>
  <hasExpression rdf:datatype="http://www.w3.org/2001/XMLSchema#string">X**3 - 28*X**2 - 601*X - 89</hasExpression>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#polynomialequation1">
  <rdf:type rdf:resource="#PolynomialEquation"/>
  <hasUnknown rdf:resource="#unknown1"/>
  <rdf:type rdf:resource="#Equation2ndDegree"/>
  <hasSolutionSet rdf:resource="#solutionset4"/>
  <hasSolutionSet rdf:resource="#solutionset5"/>
  <degree rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">2</degree>
  <hasEquality rdf:datatype="http://www.w3.org/2001/XMLSchema#string">t**2 - 4*t + 3 = 0</hasEquality>
  <isAPolynomialEquation rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean">true</isAPolynomialEquation>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#unknown1">
  <rdf:type rdf:resource="#Unknown"/>
  <hasName rdf:datatype="http://www.w3.org/2001/XMLSchema#string">t</hasName>
  <hasType rdf:datatype="http://www.w3.org/2001/XMLSchema#string">real</hasType>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#polynomialequation2">
  <rdf:type rdf:resource="#PolynomialEquation"/>
  <hasUnknown rdf:resource="#unknown2"/>
  <degree rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">3</degree>
  <hasEquality rdf:datatype="http://www.w3.org/2001/XMLSchema#string">t**3 - 28*t**2 - 601*t - 89 = 0</hasEquality>
  <isAPolynomialEquation rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean">true</isAPolynomialEquation>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#unknown2">
  <rdf:type rdf:resource="#Unknown"/>
  <hasName rdf:datatype="http://www.w3.org/2001/XMLSchema#string">t</hasName>
  <hasType rdf:datatype="http://www.w3.org/2001/XMLSchema#string">real</hasType>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#solutionset1">
  <rdf:type rdf:resource="#SolutionSet"/>
  <hasValue rdf:datatype="http://www.w3.org/2001/XMLSchema#string">{-2, -1}</hasValue>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#solutionset2">
  <rdf:type rdf:resource="#SolutionSet"/>
  <hasValue rdf:datatype="http://www.w3.org/2001/XMLSchema#string">{-2, -1}</hasValue>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#solutionset3">
  <rdf:type rdf:resource="#SolutionSet"/>
  <hasValue rdf:datatype="http://www.w3.org/2001/XMLSchema#string">{-2 + sqrt(3), -2 - sqrt(3)}</hasValue>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#solutionset4">
  <rdf:type rdf:resource="#SolutionSet"/>
  <hasValue rdf:datatype="http://www.w3.org/2001/XMLSchema#string">{1, 3}</hasValue>
</owl:NamedIndividual>

<owl:NamedIndividual rdf:about="#solutionset5">
  <rdf:type rdf:resource="#SolutionSet"/>
  <hasValue rdf:datatype="http://www.w3.org/2001/XMLSchema#string">{1, 3}</hasValue>
</owl:NamedIndividual>

<rdf:Description rdf:about="https://k.loria.fr/ontologies/call#PythonFunction">
  <rdfs:subClassOf rdf:resource="https://k.loria.fr/ontologies/call#CallableThing"/>
</rdf:Description>

<rdf:Description rdf:about="https://k.loria.fr/ontologies/call#HTTPFunction">
  <rdfs:subClassOf rdf:resource="https://k.loria.fr/ontologies/call#CallableThing"/>
</rdf:Description>

<owl:AllDisjointProperties>
  <owl:members rdf:parseType="Collection">
    <rdf:Description rdf:about="#hasEquation"/>
    <rdf:Description rdf:about="#hasSolvingMethod"/>
    <rdf:Description rdf:about="#hasUnknown"/>
    <rdf:Description rdf:about="#isPreferredTo"/>
  </owl:members>
</owl:AllDisjointProperties>

<owl:AllDisjointClasses>
  <owl:members rdf:parseType="Collection">
    <rdf:Description rdf:about="#Equation"/>
    <rdf:Description rdf:about="#Matrix"/>
    <rdf:Description rdf:about="#Polynomial"/>
    <rdf:Description rdf:about="#Problem"/>
    <rdf:Description rdf:about="#Solution"/>
    <rdf:Description rdf:about="#Unknown"/>
  </owl:members>
</owl:AllDisjointClasses>

<owl:Class>
  <owl:intersectionOf rdf:parseType="Collection">
    <rdf:Description rdf:about="#EquationSolving"/>
    <owl:Restriction>
      <owl:onProperty rdf:resource="#hasEquation"/>
      <owl:someValuesFrom rdf:resource="#Equation2ndDegree"/>
    </owl:Restriction>
  </owl:intersectionOf>
  <rdfs:subClassOf>
    <owl:Restriction>
      <owl:onProperty rdf:resource="#hasSolvingMethod"/>
      <owl:hasValue rdf:resource="#useDiscriminant"/>
    </owl:Restriction>
  </rdfs:subClassOf>
</owl:Class>

<owl:Class>
  <owl:intersectionOf rdf:parseType="Collection">
    <rdf:Description rdf:about="#EquationSolving"/>
    <owl:Restriction>
      <owl:onProperty rdf:resource="#hasEquation"/>
      <owl:someValuesFrom rdf:resource="#Equation2ndDegree"/>
    </owl:Restriction>
  </owl:intersectionOf>
  <rdfs:subClassOf>
    <owl:Restriction>
      <owl:onProperty rdf:resource="#hasSolvingMethod"/>
      <owl:hasValue rdf:resource="#findObviousRootEqDeg2"/>
    </owl:Restriction>
  </rdfs:subClassOf>
</owl:Class>


</rdf:RDF>
